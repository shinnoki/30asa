<% if @user.errors.any? %>
  <div id="error_explanation">
    <h2><%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:</h2>
  
    <ul>
    <% @user.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
    </ul>
  </div>
<% end %>

<h2>ユーザー情報: <%= @user.name %></h2>
<table>
  <tr>
    <th>Level</th>
    <th>Title</th>
    <th>Notes</th>
    <th>Score</th>
    <th>Rank</th>
    <th>Valuation</th>
    <th>Rate</th>
  </tr>
<% Song.all.each do |song| %>
  <tr>
    <td>☆<%= song.level %></td>
    <td><%= link_to song.title, song %></td>
    <td><%= song.notes %></td>
    <% record = @user.records.find_by_song_id(song, :order=>'created_at desc') %>
    <td><%= link_to show_score(record), new_user_record_path(@user, :song_id => song.id)%></td>
    <td><%= show_rank record %></td>
    <td><%= show_valuation record %></td>
    <td><%= show_rate record %></td>
  </tr>
<% end %>
</table>
<p><%= link_to 'スコア一括編集', user_records_new_lump_path(@user) %>
<% if @user.encrypted_password.blank? %>
| <%= link_to 'パスワード登録', edit_user_path(@user) %>
<% end %>
</p>
